[supervisord]
nodaemon=true
user=root
logfile=/app/logs/supervisord.log
pidfile=/app/logs/supervisord.pid

[program:xvfb]
command=/usr/bin/Xvfb :99 -screen 0 1024x768x24
autorestart=true
priority=100
user=root
stdout_logfile=/app/logs/xvfb.log
stderr_logfile=/app/logs/xvfb_error.log

[program:mt4]
command=/app/scripts/start_mt4.sh
autorestart=true
priority=200
user=root
environment=DISPLAY=":99"
stdout_logfile=/app/logs/mt4.log
stderr_logfile=/app/logs/mt4_error.log
depends_on=xvfb

[program:trade_monitor]
command=python3 /app/scripts/trade_monitor.py
autorestart=true
priority=300
user=root
stdout_logfile=/app/logs/trade_monitor.log
stderr_logfile=/app/logs/trade_monitor_error.log

[program:account_manager]
command=python3 /app/scripts/account_manager.py
autorestart=true
priority=400
user=root
stdout_logfile=/app/logs/account_manager.log
stderr_logfile=/app/logs/account_manager_error.log

[unix_http_server]
file=/app/logs/supervisor.sock

[supervisorctl]
serverurl=unix:///app/logs/supervisor.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

