---
description:
globs:
alwaysApply: true
---
# ğŸ¯ Fully Managed Trade Copier Website â€” Production-Ready Spec

Build a **centralized, fully managed MT4/MT5 trade copier website**.

**Key principle:** Users interact only with the web app. They never install or run their own EAs. All trade replication happens in backend infrastructure with millisecond latency.

---

## ğŸ—ï¸ Core Requirements

* **Latency:** Trade replication <50ms (goal 1â€“2ms detection, 10â€“50ms execution).
* **UX:** 100% web-based â€” account registration, copier setup, monitoring.
* **Backend stack:** Next.js + Supabase (extend as needed).
* **Infra:** Oracle Cloud VPS farm (scalable, dockerized).
* **Cost:** Prefer free/open-source components over paid APIs.
* **Reliability:** 99.9% uptime, robust retries, fault tolerance.
* **Security:** Encrypt + securely store broker credentials.
* **Scalability:** Support from dozens â†’ tens of thousands of accounts.

---

## ğŸ—ï¸ Architecture: Centralized VPS Farm

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Website     â”‚    â”‚  VPS Farm            â”‚    â”‚ Broker Servers  â”‚
â”‚ â€¢ Register/login  â”‚â—„â”€â”€â–ºâ”‚ â€¢ MT4/MT5 containers â”‚â—„â”€â”€â–ºâ”‚ â€¢ Live/demo acc â”‚
â”‚ â€¢ Setup copier    â”‚    â”‚ â€¢ Auto-login/monitor â”‚    â”‚ â€¢ Execution     â”‚
â”‚ â€¢ Config rules    â”‚    â”‚ â€¢ Trade detection    â”‚    â”‚ â€¢ Market data   â”‚
â”‚ â€¢ Monitoring/logs â”‚    â”‚ â€¢ Copy execution     â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ User Flow

1. **Registration**

   * User creates web account
   * Enters MT4/MT5 creds (login, password, server)
   * Chooses master/slave + copy rules

2. **Automatic Deployment**

   * Validate credentials
   * Assign account to VPS container
   * Auto-connect to broker

3. **Trade Copying**

   * Detect master trades in real time
   * Apply copy rules + lot sizing
   * Execute instantly on slave accounts
   * Real-time logs + dashboards

---

## ğŸ› ï¸ Technical Components

**1. VPS Infrastructure**

* Dockerized MT4/MT5 + EAs
* Oracle Cloud VPS, containerized
* Auto-scaling (Kubernetes when >500 users)
* Separate pools for demo/live

**2. Connection Manager**

* Secure credential vault (Supabase + KMS)
* Automatic logins, retries, health checks

**3. Trade Detection Engine**

* Event-driven (websockets, pub/sub)
* Normalize + deduplicate events
* Latency target: 1â€“2ms detection

**4. Copy Execution Engine**

* Apply mappings + risk rules
* Atomic trade ops
* Confirm execution + retry on error

**5. Monitoring & Analytics**

* Real-time dashboards (Next.js frontend)
* Alerts + health checks
* Usage metrics (scaling + billing)

---

## ğŸ“ˆ Scaling Roadmap

* **Phase 1:** Single Oracle VPS (50â€“100 accounts)
* **Phase 2:** Oracle VPS cluster, load balanced (1kâ€“10k users)
* **Phase 3:** Multi-region, distributed infra (10k+ users)

**Capacity:** \~100 accounts per VPS

---

## ğŸ’° Costs & Monetization

* VPS cost: \$50â€“100/month per 100 accounts
* Revenue: subscription tiers, per-trade fees, premium analytics

---

## ğŸš€ Deployment Phases

1. **MVP (Month 1â€“2):** Single VPS, manual setup, 10â€“50 users
2. **Automation (Month 3â€“4):** Automated deployment, monitoring, 100â€“500 users
3. **Scale (Month 5â€“6):** Multi-VPS auto-scaling, multi-region, 1k+ users

---

## âš¡ Deliverables

* **Frontend (Next.js + Tailwind):**

  * Registration/login
  * Copier config (master/slave + rules)
  * Real-time monitoring dashboard
  * Logs + system status

* **Backend (Supabase + VPS farm):**

  * Secure storage for credentials
  * Connection manager (auto-login, retries)
  * Trade detection + execution engines
  * Event broadcasting (websocket/pubsub)
  * Monitoring + analytics APIs

* **Infra (Oracle Cloud):**

  * Dockerized MT4/MT5 containers
  * Load balancing + scaling policies
  * Central logging + alerts

---

## â— Constraints

* **No mock implementations or simulations.**
* Must run in production with real MT4/MT5 accounts.
* Use Supabase MCP server to explore and update DB schema as needed.

---

**Final Task:**
ğŸ‘‰ Code the **frontend, backend, and infrastructure** for this centralized trade copier system. Ensure **millisecond-level trade replication**, reliability, and smooth scaling â€” without requiring users to install or manage their own EAs.